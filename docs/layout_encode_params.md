# レイアウトでのエンコードコーデックやパラメーターの指定

[レイアウト機能](./layout.md) で指定する JSON ファイルでは、
合成後の映像や音声をエンコードするコーデックやエンコードパラメーターを指定することができます。

エンコードコーデックやパラメーターによって、合成結果の品質やサイズ、
合成の要する時間が大きく変わる可能性があるため、
Hisui を最大限活用するためには、これらを適切に指定することが重要です。

実際に利用可能なコーデックは、Hisui のビルド方法や実行環境で変わりますが、
[`hisui list-codecs`](./command_list_codecs.md) コマンドで一覧を取得することができます。

なお [`hisui tune`](./command_tune.md) コマンドを利用することで、
適切なエンコードパラメーターをある程度自動で調整することができます。

## 音声エンコードコーデックの指定

合成後の音声のエンコードコーデックは、以下のように `audio_codec` フィールドで指定できます。

```json
{
  "audio_codec": "OPUS",
  "audio_sources": ["archive-*.json"]
}
```

`audio_codec` で指定可能な値は以下の通りです:
- `"OPUS"`: Opus音声コーデック（デフォルト）
- `"AAC"`: AAC音声コーデック

### 注意

`"AAC"` は、以下のいずれかの条件を満たしている場合にのみ指定可能です：
- macOS 用にビルドされた Hisui（Apple Audio Toolboxの AAC エンコーダーが使用されます）
- FDK-AAC を有効にしてビルドされた Hisui

公開されているビルド済みバイナリは FDK-AAC には対応していません。
FDK-AAC を利用する場合は、[ビルド方法](build.md) を参考にして、自前でのビルドを行ってください。

## 音声エンコードパラメーターの指定

映像とは異なり、音声はエンコード時に指定可能なパラメーターが少なく、
エンコードビットレートのみが指定可能となっています。

エンコードビットレートは、以下のように `audio_bitrate` フィールドで bps 単位で指定します。

```json
{
  "audio_codec": "OPUS",
  "audio_bitrate": 65536,
  "audio_sources": ["archive-*.json"]
}
```

`audio_bitrate` のデフォルト値は 65536 です。

## 映像エンコードコーデック

## 共通の映像エンコードパラメーター

## 映像エンコーダー固有のエンコードパラメーター

エンコーダー毎のデフォルト値
